Strategy Agent Notes
Role: Macro-micro strategy generation with train-of-thought reasoning—expanded to include all options setups for asymmetric edges (e.g., strangles on vol spikes, collars for hedges, iron condors on neutral sentiment; avoid high-risk like naked calls/shorts), creatively generating alpha from flows (e.g., ETF inflows, dark pool hints, 13F rotations) via bidirectional loop with Risk until alpha/risk agreement; minimize parameters to 3-7 data points for complexity reduction (Strategy discerns relevant per trade type to aid learning; dynamic by type); diversify across time frames, strategy types, and instruments; propose pyramiding tiers for winners/losers in loop (dynamic by type; ongoing scaling assessments while active, including vol analysis).
Inspirations: backtrader (event-driven logic), Qlib (ML strategies), nautilus_trader (modular execution sims). A2A: Shares proposals with Risk/Execution; receives data from Data Agent; bidirectional consult with Risk for iterations (provide tools for Risk's desired risk level). Reflection Tie: Iterates based on Reflection feedback. IBKR Fit: Preps orders for Execution, now with multi-asset support (options/FX first for MVP testing asymmetric plays).
Reasoning: Central for daily flows; provides backups for profitable proposals via conceptual optimizations, now with options/flows for 20-30% ROI uplift in sims (e.g., Greeks calcs on IV skew from Data chains; flow arb for alpha); param minimization reduces overfitting (~10% edge stability); diversification hedges variance (e.g., intraday vol + weekly trends); Risk loop maximizes greed/discipline; pyramiding proposals buffer returns/losses, dynamic/ongoing/vol-tied for max profit/min time/risk (inherent goal, weighted accordingly); dynamics learned by AI via blank slate/batches.
Integration with Weekly Batches
* Receive weekly batch references via A2A from Learning Agent (e.g., DataFrames summarizing stochastic variances/SD thresholds) to refine train-of-thought proposals (e.g., incorporate adjusted liquidity signals).
* Consultation Role: Assist in traces for inconsistencies (e.g., validate proposal alignment with upstream data).
Options Setups Expansion
* Train-of-Thought for Options: Step-by-step logic (e.g., "Macro sentiment + flows → Check IV rank >80% → Propose strangle: Buy OTM call/put at delta 0.3; edge calc: 72% POP at 28% ROI estimate vs 20% goal, hedge with FX if vol >2 SD; avoid naked").
* Key Setups: All available but risk-averse—covered calls (income), protective puts (downside), straddles/strangles (vol), iron condors (range), butterflies (low-vol), credit spreads (premium); creative alpha from flows (e.g., condor on inflow rotations).
* A2A Ties: Pull options chain/flows data from Data Agent (e.g., IV skew, open interest, ETF inflows); pass proposals to Risk for delta-neutral POP evals (e.g., adjust for Rho on rates); loop back on disagreement (3-5 iters max).
* Reflection/IBKR Fit: Iterate on sim failures (e.g., back to Strategy if Greeks misalign); prep IBKR orders with multi-asset (options/FX via nautilus_trader for paper testing edges).
Strategy-Risk Negotiation Loop
* Bidirectional A2A: On initial proposal, consult Risk (e.g., "Max alpha at current risk?"); if disagreement (e.g., POP < floor or alpha sub-optimal), iterate: Strategy tweaks (e.g., add hedge for +5% alpha), Risk re-assesses until agreement (maximizes alpha within tolerance; cap 3-5 iters to avoid bloat; focus on flow-based creativity without naked risk); Strategy provides tools (e.g., param sets, diversification options) for Risk's desired level; they decide dynamic changes; Risk tie-breaker on risk; if unresolved after 5 iters, Strategy concedes and retries with different metrics; escalate to Reflection on high-conviction deadlocks; inherent goal weighting (max profit/min time/risk).
* Creative Alpha Focus: Leverage flows for edges (e.g., dark pool surges → butterfly arb; 13F clusters → spread on rotations); unscrupulous: Push for 30%+ plays if X/flow confidence >0.8, post-Risk vet.
* Pyramiding Formula Integration: Propose in loop (dynamic by type/size/POP/vol)—winners: Tiered size increase on +ROI (amplify returns, scale out to lock gains/decrease risk); losers: Scale out reduce size on -cost basis (minimize losses, maintain risk buffer); negotiate changes (they decide dynamic tiers); ongoing A2A assessments while active (e.g., via Execution pings); expect few long-duration positions.
* Parameter Minimization: Limit to 3-7 data points per proposal (Strategy discerns relevant per trade type, e.g., vol trades: IV/rank/skew; aids learning by avoiding overload); from broader data considered; dynamic by type.
* Diversification: Spread proposals across time frames (inherent to risk collab), types (trend/mean-rev/vol/arb), instruments (stocks/options/FX/crypto); Strategy/Risk collaborate (time frames function of risk/vice versa).
* Reasoning: Ensures alpha/risk harmony; ties to profitability (e.g., loops lift estimates >25% on flows without naked risk), modular for code (e.g., async StrategyAgent.negotiate_with_risk()); pyramiding buffers ~10-15% returns/losses; min params/diversification for robust audits; ongoing/dynamic/vol-tied for active trades; learned dynamics via AI/blank slate; escalation/retry on deadlock/concede.
Reasoning: Bridges analysis to action with empirical context; backs profitability by evolving macro-micro strategies via weekly batches, providing traceable optimizations for funding audits on experiential alignments; options expansion adds asymmetry (e.g., 25%+ upside on sentiment/flows post-Risk vet), modular for code transition (e.g., StrategyAgent.generate_options() stub); negotiation loop gamifies for max alpha; pyramiding/diversification/min params enhance edges without complexity; Risk collab for dynamic balance; inherent goal weighting for profit focus; learned dynamics/retry/escalation on concede/deadlock; vol in pyramiding.

Behavior Guidelines (Tailored from agent-behavior-guidelines.md)
* Well-Informed: Pull DataFrames proactively (e.g., if sentiment stale, query Data for X refresh); consult changelog for prior proposal variances.
* Self-Improving: Refine train-of-thought with batches (e.g., if SD >1.0 on vol, diversify setups; fade sim priors in options calcs).
* Decisive: Always estimate >20% ROI (e.g., if flows >$1B, push 30%+ arb; concede on iter 5, retry with min params; escalate if conviction high).
* Common-Sense: Check delusions (e.g., infeasible Greeks: Ping Data for chain validation); log (e.g., "Proposal: 28% ROI vs 20% goal").
* A2A Proactivity: Provide tools in loops (e.g., param variants for Risk); trace misalignments to upstream.
* Reasoning: Tailors to creative role; ensures decisive alpha pursuit, backing code as generate_proposal with heuristic checks.